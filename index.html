<!DOCTYPE html><html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Herramienta Enfermería</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; max-width: 600px; margin: auto; }
  .page { display: none; }
  .active { display: block; }
  h2 { margin-bottom: 10px; }
  button { margin-top: 20px; padding: 10px 20px; }
  .checkbox-group { margin-bottom: 15px; }
</style>
</head>
<body><h1>Herramienta Enfermería</h1><form id="formWizard">  <!-- Página 1: Diagnósticos -->  <div class="page active" id="page1">
    <h2>Diagnósticos clínicos</h2>
    <div class="checkbox-group">
      <label><input type="checkbox" name="diagnostico" value="HTA"> HTA</label><br>
      <label><input type="checkbox" name="diagnostico" value="DM2"> DM2</label><br>
      <label><input type="checkbox" name="diagnostico" value="Alzheimer"> Alzheimer</label><br>
      <label><input type="checkbox" name="diagnostico" value="EPOC"> EPOC</label><br>
      <label><input type="checkbox" name="diagnostico" value="Insuficiencia cardíaca"> Insuficiencia cardíaca</label>
    </div>
    <button type="button" onclick="nextPage(2)">Siguiente</button>
  </div>  <!-- Página 2: Tratamientos -->  <div class="page" id="page2">
    <h2>Tratamientos</h2>
    <textarea id="tratamientos" rows="5" style="width:100%;" placeholder="Escribe los medicamentos y dosis aquí..."></textarea>
    <br>
    <button type="button" onclick="nextPage(1)">Anterior</button>
    <button type="button" onclick="nextPage(3)">Siguiente</button>
  </div>  <!-- Página 3: Problemas de salud -->  <div class="page" id="page3">
    <h2>Problemas de salud / factores de riesgo</h2>
    <div class="checkbox-group">
      <label><input type="checkbox" name="problema" value="Sedentarismo"> Sedentarismo</label><br>
      <label><input type="checkbox" name="problema" value="Riesgo de caídas"> Riesgo de caídas</label><br>
      <label><input type="checkbox" name="problema" value="Riesgo desnutrición"> Riesgo desnutrición</label><br>
      <label><input type="checkbox" name="problema" value="Incontinencia"> Incontinencia</label><br>
      <label><input type="checkbox" name="problema" value="Alteración sueño"> Alteración sueño</label>
    </div>
    <button type="button" onclick="nextPage(2)">Anterior</button>
    <button type="button" onclick="generatePDFs()">Generar PDFs</button>
  </div></form><script>
function nextPage(pageNum) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById('page' + pageNum).classList.add('active');
}

function generatePDFs() {
  const { jsPDF } = window.jspdf;

  // Recoger datos
  const diagnosticos = Array.from(document.querySelectorAll('input[name="diagnostico"]:checked')).map(cb => cb.value);
  const problemas = Array.from(document.querySelectorAll('input[name="problema"]:checked')).map(cb => cb.value);
  const tratamientos = document.getElementById('tratamientos').value;

  const lineHeight = 10;

  // PDF 1: Resumen
  let doc1 = new jsPDF();
  doc1.setFontSize(16);
  doc1.text("Resumen del paciente", 10, 20);
  doc1.setFontSize(12);
  let y = 40;
  doc1.text("Diagnósticos:", 10, y); y += lineHeight;
  diagnosticos.forEach(d => { doc1.text(`• ${d}`, 12, y); y += lineHeight; });
  if(diagnosticos.length === 0){ doc1.text("• Ninguno", 12, y); y += lineHeight; }

  doc1.text("Tratamientos:", 10, y); y += lineHeight;
  if(tratamientos.trim() !== ''){
    tratamientos.split('\n').forEach(line => { doc1.text(`• ${line}`, 12, y); y += lineHeight; });
  } else { doc1.text("• Ninguno", 12, y); y += lineHeight; }

  doc1.text("Problemas:", 10, y); y += lineHeight;
  problemas.forEach(p => { doc1.text(`• ${p}`, 12, y); y += lineHeight; });
  if(problemas.length === 0){ doc1.text("• Ninguno", 12, y); y += lineHeight; }
  doc1.save('Resumen_Paciente.pdf');

  // PDF 2: Recomendaciones enfermera
  let doc2 = new jsPDF();
  doc2.setFontSize(16);
  doc2.text("Recomendaciones para la enfermera", 10, 20);
  doc2.setFontSize(12);
  y = 40;
  diagnosticos.forEach(d => { doc2.text(`• ${d}: Revisar según protocolo clínico`, 10, y); y += lineHeight; });
  problemas.forEach(p => { doc2.text(`• ${p}: Seguimiento enfermero`, 10, y); y += lineHeight; });
  doc2.save('Recomendaciones_Enfermera.pdf');

  // PDF 3: Consejos paciente
  let doc3 = new jsPDF();
  doc3.setFontSize(16);
  doc3.text("Consejos para el paciente", 10, 20);
  doc3.setFontSize(12);
  y = 40;
  diagnosticos.forEach(d => { doc3.text(`• ${d}: seguir indicaciones médicas`, 10, y); y += lineHeight; });
  problemas.forEach(p => { doc3.text(`• ${p}: medidas preventivas recomendadas`, 10, y); y += lineHeight; });
  doc3.save('Consejos_Paciente.pdf');

  alert("PDFs generados correctamente!");
}
</script></body>
</html>
